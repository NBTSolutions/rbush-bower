(function(b){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=b()}else{if(typeof define==="function"&&define.amd){define([],b)}else{var a;if(typeof window!=="undefined"){a=window}else{if(typeof global!=="undefined"){a=global}else{if(typeof self!=="undefined"){a=self}else{a=this}}}a.rbush=b()}}})(function(){var d,b,a;return(function c(f,k,h){function g(q,n){if(!k[q]){if(!f[q]){var m=typeof require=="function"&&require;if(!n&&m){return m(q,!0)}if(e){return e(q,!0)}var p=new Error("Cannot find module '"+q+"'");throw p.code="MODULE_NOT_FOUND",p}var i=k[q]={exports:{}};f[q][0].call(i.exports,function(l){var o=f[q][1][l];return g(o?o:l)},i,i.exports,c,f,k,h)}return k[q].exports}var e=typeof require=="function"&&require;for(var j=0;j<h.length;j++){g(h[j])}return g})({1:[function(l,f,v){f.exports=q;var g=l("quickselect");function q(x,y){if(!(this instanceof q)){return new q(x,y)}this._maxEntries=Math.max(4,x||9);this._minEntries=Math.max(2,Math.ceil(this._maxEntries*0.4));if(y){this._initFormat(y)}this.clear()}q.prototype={all:function(){return this._all(this.data,[])},search:function(E){var z=this.data,F=[],y=this.toBBox;if(!e(E,z)){return F}var A=[],B,C,x,D;while(z){for(B=0,C=z.children.length;B<C;B++){x=z.children[B];D=z.leaf?y(x):x;if(e(E,D)){if(z.leaf){F.push(x)}else{if(k(E,D)){this._all(x,F)}else{A.push(x)}}}}z=A.pop()}return F},collides:function(D){var C=this.data,B=this.toBBox;if(!e(D,C)){return false}var A=[],z,x,E,y;while(C){for(z=0,x=C.children.length;z<x;z++){E=C.children[z];y=C.leaf?B(E):E;if(e(D,y)){if(C.leaf||k(D,y)){return true}A.push(E)}}C=A.pop()}return false},load:function(B){if(!(B&&B.length)){return this}if(B.length<this._minEntries){for(var y=0,x=B.length;y<x;y++){this.insert(B[y])}return this}var A=this._build(B.slice(),0,B.length-1,0);if(!this.data.children.length){this.data=A}else{if(this.data.height===A.height){this._splitRoot(this.data,A)}else{if(this.data.height<A.height){var z=this.data;this.data=A;A=z}this._insert(A,this.data.height-A.height-1,true)}}return this},insert:function(x){if(x){this._insert(x,this.data.height-1)}return this},clear:function(){this.data=w([]);return this},remove:function(F,z){if(!F){return this}var y=this.data,E=this.toBBox(F),G=[],B=[],A,D,C,x;while(y||G.length){if(!y){y=G.pop();D=G[G.length-1];A=B.pop();x=true}if(y.leaf){C=o(F,y.children,z);if(C!==-1){y.children.splice(C,1);G.push(y);this._condense(G);return this}}if(!x&&!y.leaf&&k(y,E)){G.push(y);B.push(A);A=0;D=y;y=y.children[0]}else{if(D){A++;y=D.children[A];x=false}else{y=null}}}return this},toBBox:function(x){return x},compareMinX:n,compareMinY:m,toJSON:function(){return this.data},fromJSON:function(x){this.data=x;return this},_all:function(z,x){var y=[];while(z){if(z.leaf){x.push.apply(x,z.children)}else{y.push.apply(y,z.children)}z=y.pop()}return x},_build:function(E,y,H,I){var C=H-y+1,D=this._maxEntries,z;if(C<=D){z=w(E.slice(y,H+1));p(z,this.toBBox);return z}if(!I){I=Math.ceil(Math.log(C)/Math.log(D));D=Math.ceil(C/Math.pow(D,I-1))}z=w([]);z.leaf=false;z.height=I;var F=Math.ceil(C/D),G=F*Math.ceil(Math.sqrt(D)),B,A,x,J;u(E,y,H,G,this.compareMinX);for(B=y;B<=H;B+=G){x=Math.min(B+G-1,H);u(E,B,x,F,this.compareMinY);for(A=B;A<=x;A+=F){J=Math.min(A+F-1,x);z.children.push(this._build(E,A,J,I-1))}}p(z,this.toBBox);return z},_chooseSubtree:function(H,B,x,I){var C,D,z,E,y,G,A,F;while(true){I.push(B);if(B.leaf||I.length-1===x){break}A=F=Infinity;for(C=0,D=B.children.length;C<D;C++){z=B.children[C];y=i(z);G=h(H,z)-y;if(G<F){F=G;A=y<A?y:A;E=z}else{if(G===F){if(y<A){A=y;E=z}}}}B=E||B.children[0]}return B},_insert:function(A,D,B){var x=this.toBBox,C=B?A:x(A),z=[];var y=this._chooseSubtree(C,this.data,D,z);y.children.push(A);r(y,C);while(D>=0){if(z[D].children.length>this._maxEntries){this._split(z,D);D--}else{break}}this._adjustParentBBoxes(C,z,D)},_split:function(B,D){var A=B[D],C=A.children.length,x=this._minEntries;this._chooseSplitAxis(A,x,C);var y=this._chooseSplitIndex(A,x,C);var z=w(A.children.splice(y,A.children.length-y));z.height=A.height;z.leaf=A.leaf;p(A,this.toBBox);p(z,this.toBBox);if(D){B[D-1].children.push(z)}else{this._splitRoot(A,z)}},_splitRoot:function(y,x){this.data=w([y,x]);this.data.height=y.height+1;this.data.leaf=false;p(this.data,this.toBBox)},_chooseSplitIndex:function(B,C,F){var D,z,x,G,y,H,A,E;H=A=Infinity;for(D=C;D<=F-C;D++){z=s(B,0,D,this.toBBox);x=s(B,D,F,this.toBBox);G=j(z,x);y=i(z)+i(x);if(G<H){H=G;E=D;A=y<A?y:A}else{if(G===H){if(y<A){A=y;E=D}}}}return E},_chooseSplitAxis:function(B,y,D){var z=B.leaf?this.compareMinX:n,x=B.leaf?this.compareMinY:m,A=this._allDistMargin(B,y,D,z),C=this._allDistMargin(B,y,D,x);if(A<C){B.children.sort(z)}},_allDistMargin:function(A,B,F,x){A.children.sort(x);var z=this.toBBox,G=s(A,0,B,z),E=s(A,F-B,F,z),C=t(G)+t(E),D,y;for(D=B;D<F-B;D++){y=A.children[D];r(G,A.leaf?z(y):y);C+=t(G)}for(D=F-B-1;D>=B;D--){y=A.children[D];r(E,A.leaf?z(y):y);C+=t(E)}return C},_adjustParentBBoxes:function(z,y,A){for(var x=A;x>=0;x--){r(y[x],z)}},_condense:function(y){for(var x=y.length-1,z;x>=0;x--){if(y[x].children.length===0){if(x>0){z=y[x-1].children;z.splice(z.indexOf(y[x]),1)}else{this.clear()}}else{p(y[x],this.toBBox)}}},_initFormat:function(y){var x=["return a"," - b",";"];this.compareMinX=new Function("a","b",x.join(y[0]));this.compareMinY=new Function("a","b",x.join(y[1]));this.toBBox=new Function("a","return {minX: a"+y[0]+", minY: a"+y[1]+", maxX: a"+y[2]+", maxY: a"+y[3]+"};")}};function o(A,x,z){if(!z){return x.indexOf(A)}for(var y=0;y<x.length;y++){if(z(A,x[y])){return y}}return -1}function p(y,x){s(y,0,y.children.length,x,y)}function s(A,x,B,z,C){if(!C){C=w(null)}C.minX=Infinity;C.minY=Infinity;C.maxX=-Infinity;C.maxY=-Infinity;for(var y=x,D;y<B;y++){D=A.children[y];r(C,A.leaf?z(D):D)}return C}function r(y,x){y.minX=Math.min(y.minX,x.minX);y.minY=Math.min(y.minY,x.minY);y.maxX=Math.max(y.maxX,x.maxX);y.maxY=Math.max(y.maxY,x.maxY);return y}function n(y,x){return y.minX-x.minX}function m(y,x){return y.minY-x.minY}function i(x){return(x.maxX-x.minX)*(x.maxY-x.minY)}function t(x){return(x.maxX-x.minX)+(x.maxY-x.minY)}function h(y,x){return(Math.max(x.maxX,y.maxX)-Math.min(x.minX,y.minX))*(Math.max(x.maxY,y.maxY)-Math.min(x.minY,y.minY))}function j(z,y){var x=Math.max(z.minX,y.minX),C=Math.max(z.minY,y.minY),B=Math.min(z.maxX,y.maxX),A=Math.min(z.maxY,y.maxY);return Math.max(0,B-x)*Math.max(0,A-C)}function k(y,x){return y.minX<=x.minX&&y.minY<=x.minY&&x.maxX<=y.maxX&&x.maxY<=y.maxY}function e(y,x){return x.minX<=y.maxX&&x.minY<=y.maxY&&x.maxX>=y.minX&&x.maxY>=y.minY}function w(x){return{children:x,height:1,leaf:true,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function u(y,C,A,D,B){var x=[C,A],z;while(x.length){A=x.pop();C=x.pop();if(A-C<=D){continue}z=C+Math.ceil((A-C)/D/2)*D;g(y,z,C,A,B);x.push(C,z,z,A)}}},{quickselect:2}],2:[function(f,h,e){h.exports=g;function g(x,u,q,C,l){q=q||0;C=C||(x.length-1);l=l||i;while(C>q){if(C-q>600){var p=C-q+1;var r=u-q+1;var A=Math.log(p);var E=0.5*Math.exp(2*A/3);var y=0.5*Math.sqrt(A*E*(p-E)/p)*(r-p/2<0?-1:1);var B=Math.max(q,Math.floor(u-r*E/p+y));var o=Math.min(C,Math.floor(u+(p-r)*E/p+y));g(x,u,B,o,l)}var D=x[u];var w=q;var v=C;j(x,q,u);if(l(x[C],D)>0){j(x,q,C)}while(w<v){j(x,w,v);w++;v--;while(l(x[w],D)<0){w++}while(l(x[v],D)>0){v--}}if(l(x[q],D)===0){j(x,q,v)}else{v++;j(x,v,C)}if(v<=u){q=v+1}if(u<=v){C=v-1}}}function j(k,n,l){var m=k[n];k[n]=k[l];k[l]=m}function i(l,k){return l<k?-1:l>k?1:0}},{}]},{},[1])(1)});
